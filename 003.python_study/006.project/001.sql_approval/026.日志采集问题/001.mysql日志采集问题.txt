

（ 1 ）首先判断是否开启日志记录

	 SHOW VARIABLES LIKE 'general_log';

	 ON表示 开启


（ 2 ）判断 日志是在表还是文件

	 SHOW GLOBAL VARIABLES LIKE 'log_output';

	 TABLE → 日志写到 mysql.general_log 表。
	 FILE → 日志写到 general_log_file 指定的文件。

	 如果是 FILE,TABLE → 两边都会写。

（ 3.1 ） 如果文件有写入，从这里获取文件路径
	 SHOW GLOBAL VARIABLES LIKE 'log_output';
	 然后从文件采集

（ 3.2 ） 如果表有写入，从这里获取文件路径

	SELECT argument
	FROM mysql.general_log
	WHERE event_time >= NOW() - INTERVAL 1 MINUTE
	AND argument IS NOT NULL
	AND argument <> ''
	AND argument NOT LIKE '/*%'
	AND argument NOT LIKE 'SET%'
	AND argument NOT LIKE 'set%'

	AND argument NOT LIKE 'EXPLAIN%'
	AND argument NOT LIKE 'explain%'

	AND argument NOT LIKE 'SHOW%'
	AND argument NOT LIKE 'show%'

	AND argument NOT LIKE 'ROOT%'
	AND argument NOT LIKE 'root%'

	AND argument NOT LIKE 'commit%'
	AND argument NOT LIKE 'COMMIT%'

	ORDER BY event_time DESC;



SELECT argument
FROM mysql.general_log
WHERE event_time >= NOW() - INTERVAL 1 MINUTE
AND argument IS NOT NULL
AND argument <> ''
AND argument NOT LIKE '/*%'
AND argument NOT LIKE 'SET%'
AND UPPER(argument) NOT LIKE 'EXPLAIN%'
AND UPPER(argument) NOT LIKE 'SHOW%'
AND UPPER(argument) NOT LIKE 'ROOT%'
AND UPPER(argument) NOT LIKE 'COMMIT%'


ORDER BY event_time DESC;